<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Product Portfolio</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
    <style>
        body { margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f4f4f4; color: #333; }
        .container { display: flex; flex-direction: column; height: 100vh; }
        
        /* –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ */
        model-viewer { width: 100%; flex-grow: 1; background-color: #ffffff; }

        /* –°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π (–≥–∞–ª–µ—Ä–µ—è) */
        .gallery { 
            display: flex; gap: 10px; padding: 15px; overflow-x: auto; 
            background: #fff; border-top: 1px solid #ddd; height: 120px;
        }
        .thumb { 
            min-width: 100px; height: 90px; background: #eee; border-radius: 8px;
            cursor: pointer; display: flex; align-items: center; justify-content: center;
            font-size: 12px; text-align: center; border: 2px solid transparent; transition: 0.3s;
        }
        .thumb:hover { border-color: #007bff; }
        .thumb.active { border-color: #007bff; background: #e7f1ff; }

        .info { position: absolute; top: 10px; left: 10px; pointer-events: none; background: rgba(255,255,255,0.8); padding: 5px 12px; border-radius: 20px; font-size: 14px; }
    </style>
</head>
<body>

<div class="container">
    <div class="info">Model: <span id="model-name">Loading...</span></div>
    
    <model-viewer id="main-viewer" ar ar-modes="webxr scene-viewer quick-look" camera-controls shadow-intensity="1" auto-rotate>
        <button slot="ar-button" style="background-color: white; border-radius: 4px; border: none; position: absolute; top: 16px; right: 16px; padding: 10px;">
            üëã View in AR
        </button>
    </model-viewer>

    <div class="gallery" id="gallery">
        </div>
</div>

<script>
    // 1. –°–ü–ò–°–û–ö –¢–í–û–ò–• –ú–û–î–ï–õ–ï–ô (–ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–π –Ω–æ–≤—ã–µ —Å—é–¥–∞)
    const models = [
        { name: "Test Model", file: "test.glb" },
        { name: "Ampoule", file: "ampoule.glb" },
        { name: "Syringe", file: "syringe.glb" }
    ];

    const viewer = document.getElementById('main-viewer');
    const modelNameDisplay = document.getElementById('model-name');
    const gallery = document.getElementById('gallery');

    // –§—É–Ω–∫—Ü–∏—è —Å–º–µ–Ω—ã –º–æ–¥–µ–ª–∏
    function setModel(modelFile, modelName) {
        viewer.src = modelFile;
        viewer.iosSrc = modelFile;
        modelNameDisplay.textContent = modelName;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –≤ –≥–∞–ª–µ—Ä–µ–µ
        document.querySelectorAll('.thumb').forEach(t => t.classList.remove('active'));
        const activeThumb = Array.from(document.querySelectorAll('.thumb')).find(t => t.textContent === modelName);
        if (activeThumb) activeThumb.classList.add('active');
    }

    // –°–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫–∏ –≤ –≥–∞–ª–µ—Ä–µ–µ
    models.forEach(m => {
        const thumb = document.createElement('div');
        thumb.className = 'thumb';
        thumb.textContent = m.name;
        thumb.onclick = () => setModel(m.file, m.name);
        gallery.appendChild(thumb);
    });

    // 2. –õ–û–ì–ò–ö–ê –î–õ–Ø QR-–ö–û–î–û–í (–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Å—Å—ã–ª–∫–µ)
    // –ï—Å–ª–∏ —Å—Å—ã–ª–∫–∞ –≤–∏–¥–∞: ...index.html?model=ampoule.glb
    const urlParams = new URLSearchParams(window.location.search);
    const modelParam = urlParams.get('model');

    if (modelParam) {
        setModel(modelParam, modelParam);
    } else {
        // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–≤—É—é –∏–∑ —Å–ø–∏—Å–∫–∞
        setModel(models[0].file, models[0].name);
    }
</script>

</body>
</html>
